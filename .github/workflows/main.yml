
name: Deploy to Heroku with Docker Image

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Deploy to Heroku
        uses: AkhileshNS/heroku-deploy@v3.8.8
        with:
          # This will be used for authentication. You can find it in your heroku homepage account settings
          heroku_api_key: ${{secrets.HEROKU_API_KEY}}
          # Email that you use with heroku
          heroku_email: ${{secrets.HEROKU_EMAIL}}
          # The appname to use for deploying/updating
          heroku_app_name: va-git
          # An optional buildpack to use when creating the heroku application
          # Will deploy using Dockerfile in project root.
          usedocker: true
          # Type of heroku process (web, worker, etc). This option only makes sense when usedocker enabled
          docker_heroku_process_type: web
